os: linux
dist: xenial
language: node_js
env:
  global:
    - LAST_PUBLISHED_VERSION=$(npm run --silent latest-published-version)
    - BUILD_VERSION=$(npm run --silent current-version)
install:
  - npm install
script:
  - 'echo last_published_version: $LAST_PUBLISHED_VERSION'
  - 'echo build version: $BUILD_VERSION'
  - npm run lint || travis_terminate 1
  - npm run test || travis_terminate 1
deploy:
  provider: npm
  email: joshuatvernon@gmail.com
  on:
    branch: main
    condition: '$BUILD_VERSION != $LAST_PUBLISHED_VERSION'
  api_key:
    secure: ZPoMraxhvcYTLbC6m0aRDzHfd/96bOOV9Tvm67TI1/1reX3rvkpBjNSEKZ4xwntkFLO8TDLr0eMOFW6T5wsBR+QzaFQFaA5cAGDxAnrzzK8cANKoqg4HqhNdlQfjenCEv8xgrC+6G5nZHdJ0Ji3/SiiRxpi4p4Ix4pe1fbRVxa3KpvXuyMf2n1opCH2PbeMAMExbDjwzMKkxkYjDl/BJawWhXVwC+6Lx3mrakDF2DX1bwbFYJS381Mvrdiqz/vQ0OMivoyp1MdPz1185pwgq1ijbtRjp6cbx9BPd4WRmhCUXi1rURElU2ThN3CKwVLuWdSECJOa/9i7ADzTApH1wJ5srlfoE8E0U6ZlVm1rh1i3Pa7GEsE/mJvF6IL3LM1kbmW4xO3CEoRuefbPyHN6idYnkegvAKpNhHWadHMwF6bkZSlTKoV3bG8+qNzqDFzNSaASfGa7Yy4ucFSNHop2PX69Z5ps4gFL+mYG5Mi8U5DHdRqfCZhzOQbFHEZ4HT9a/mNDPz7lF6tZOkQdPQNxtD3dq72hCaSDguPWS3gBo1zcT3cnVD6nsAyhAp8A4AiOW1cw7Gy1NhWa1lWNhd9oCGMCXNf8liIVvdjpe3EZ7n2rVNWz1PvqUrrUziR4GJwRFMKXzsVTOGNHJlbLkRzexFl0sfrN4QU5AQaHqeDlx2+4=
